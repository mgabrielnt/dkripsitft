# ================================
# KONFIGURASI GLOBAL TFT
# Dipakai oleh:
# - train_tft_baseline.py
# - train_tft_with_sentiment.py
# ================================

# Target yang diprediksi TFT
# (sekarang tetap "close"; kalau nanti mau eksperimen return, bisa ganti ke "log_return_1d")
target: "close"

# Panjang encoder/decoder
max_encoder_length: 60          # 60 hari historis
max_prediction_length: 5        # konsisten dengan data.horizon = 5

# Training (BERLAKU UNTUK BASELINE & HYBRID)
batch_size: 64
max_epochs: 100                 # agak lebih panjang, tapi ada EarlyStopping
learning_rate: 0.0005          # 5e-4 → lebih halus dari 1e-3 untuk TFT

accelerator: "auto"             # "gpu" kalau nanti pakai GPU
loss: "mae"                     # sebanding dengan MAE baseline naive

# Early stopping (dipakai di kedua trainer)
early_stopping_patience: 10

# ================================
# BASELINE TEKNIKAL SAJA
# Dipakai langsung oleh:
#   - train_tft_baseline.py
# ================================

# Model baseline ukuran "menengah": tidak sekecil 16, tapi masih aman untuk ~2k sample
hidden_size: 64
dropout: 0.10                   # baseline relatif sederhana → dropout cukup 0.1

# Layer & ukuran internal TFT
lstm_layers: 2
attention_head_size: 4
hidden_continuous_size: 32      # lebih besar sedikit supaya fitur continuous (indikator teknikal) kepakai optimal

# ================================
# HYBRID (TEKNIKAL + SENTIMEN)
# Dipakai oleh:
#   - train_tft_with_sentiment.py
#   hidden_size = hidden_size_hybrid (fallback ke hidden_size)
#   dropout     = dropout_hybrid     (fallback ke dropout)
# ================================

# Hybrid sedikit lebih besar karena dia bawa fitur sentimen tambahan
hidden_size_hybrid: 96          # > baseline (64) tapi masih jauh dari "overkill"
dropout_hybrid: 0.15            # sedikit lebih besar supaya tidak overfit di fitur sentimen

# Representasi & konfigurasi fitur sentimen
sentiment_representation: "raw"      # pakai nilai mean sentimen kontinu
sentiment_bucket_threshold: 0.05     # ambang netral kalau nanti pakai "sign"

# quantile clipping kamu sekarang hard-coded di script (0.995),
# key di bawah boleh ada / boleh diabaikan (tidak dipakai langsung oleh script revisi)
sentiment_clip_quantile: 0.995       

# Set fitur sentimen:
# - v3: mean, count, pos/neg/neu, shock, extreme_news
# - v4: v3 + sentiment_vol_7d + sentiment_trend_5d  (lebih dinamis)
sentiment_feature_set: "v4"
